# Tealium iQ Extension Documentation

## 1. Extension Overview

- **Name**: GWC : Tag : Set : Phone Conversion Number
- **ID**: 1057
- **Type**: Javascript Code
- **Scope**: 879
- **Execution Frequency**: On Trigger (as defined by the eventType)

### Summary
This extension sets a specific phone conversion number for Google Ads tracking using the global `gtag` function. The key purpose of this extension is to provide Google with the correct phone number to track conversions from calls, which is essential for measuring advertising performance and optimising marketing strategies.

---

## 2. Code Explanation

```javascript
(function(a,b,u){
  gtag('config', 'AW-807971864/dUE3CMLrooIBEJjYooED', {
      'phone_conversion_number': '0345 608 0374'
  });
})(eventType, eventPayload, tagObject);
```

### Key Variables

- **a**: Represents the event type (passed as `eventType`).
- **b**: Represents the event payload (passed as `eventPayload`).
- **u**: Represents the tag object (passed as `tagObject`).

### Logic Flow

1. The immediately-invoked function expression (IIFE) is executed, which takes three parameters: `eventType`, `eventPayload`, and `tagObject`.
2. Inside the IIFE, the `gtag` function is called with the command `config` and a specific Google Ads ID (`'AW-807971864/dUE3CMLrooIBEJjYooED'`).
3. A configuration object is passed with the `'phone_conversion_number'` set to `'0345 608 0374'`.

### Dependencies
- **gtag**: The extension relies on the global Google Ads function `gtag`. Ensure that the Google Ads integration is properly set up in your website before using this extension.

---

## 3. Usage Examples

### Normal Conditions
- When a user interacts with an element or an event is triggered, this extension will execute, setting the specified phone conversion number for tracking purposes, thereby allowing you to capture data correctly in Google Ads.

### Edge Conditions
- If the `gtag` function is not loaded or initialised, the call to set the phone conversion number will fail silently. This situation could occur if there are loading issues with the Google Ads library.

---

## 4. Known Limitations & Gotchas

- If the Google Ads library is not loaded before this extension executes, the phone conversion number will not be set, leading to potentially inaccurate conversion tracking.
- If there are multiple instances of the same extension or other extensions that modify the `gtag` behaviour, conflicts may arise, affecting the execution and final behaviour of tracking calls.

---

## 5. Recommendations for Refactoring

- **Defensive Checks**: Although we are not implementing defensive coding for `eventType` and `eventPayload`, it may be beneficial to check if `gtag` is defined before invoking it. This can help prevent runtime errors.
  
  Example:
  ```javascript
  if (typeof gtag === 'function') {
      gtag('config', ...);
  }
  ```

- **Modularization**: Consider separating the logic into smaller functions to enhance readability and maintainability. For example, the `gtag` call could be extracted into its own function.

- **Code Style**: Ensure consistent formatting and indentation across the entire codebase for better readability.

---

## 6. Maintenance & Further Notes

- **Ownership**: Assign a specific team member or team as the owner of this extension to ensure accountability for updates and monitoring.
- **Testing Guidelines**: Regularly test the extension in your staging environment to ensure it correctly sets the phone conversion number, especially after changes to the Google Ads integration or updates to Tealium iQ.
- **Documentation Updates**: Keep this documentation up to date with any changes made to the extension code or functionality. Ensure that any stakeholders are informed of updates.

--- 

This documentation should serve as a comprehensive guide for developers and stakeholders using the GWC : Tag : Set : Phone Conversion Number extension in Tealium iQ.