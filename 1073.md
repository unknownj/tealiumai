# Tealium iQ Extension Documentation

## 1. Extension Overview

- **Name:** WTA : TAG : Set : Event Listener Type
- **ID:** 1074
- **Type:** Lookup Table
- **Scope:** 894
- **Execution Frequency:** Active

### Summary
This extension is designed to dynamically set the `JourneyStepName` property based on existing Journey properties (`JourneyStep` and `JourneyAction`). If `JourneyStepName` is not already defined, the extension constructs a name that combines the `JourneyStep` and optionally the `JourneyAction`, providing clarity and context for tracking user interactions within the platform.

## 2. Code Explanation

### Key Variables
- **eventType:** The type of event that triggers the extension, passed as a parameter.
- **eventPayload:** An object containing event data, which may hold various user interaction details.
- **tagObject:** Not specifically utilised in the extension, but generally represents the context and data structure of the event.

### Logic Flow
1. The extension checks if the `JourneyStepName` in the `eventPayload` is either unassigned or an empty string.
2. If true, it checks if `JourneyStep` is available and is not an empty string.
3. If the `JourneyStep` is valid, `JourneyStepName` is set to "Step X", where X is the value of `JourneyStep`.
4. If `JourneyAction` is also provided and valid, it appends this information to `JourneyStepName`, resulting in a string like "Step X (Action Y)".

### Dependencies
This extension depends on:
- global object `b` (representing the `eventPayload`) containing `JourneyStep`, `JourneyStepName`, and `JourneyAction`.

## 3. Usage Examples

### Normal Conditions
When a user progresses through a series of defined steps in a journey:
- **Input:**
    - `JourneyStep`: "2"
    - `JourneyAction`: "Reviewed Product"
- **Output:**
    - `JourneyStepName`: "Step 2 (Reviewed Product)"

### Edge Conditions
1. **Missing `JourneyStep`:**
    - **Input:**
        - `JourneyStep`: ""
        - `JourneyAction`: "Viewed Offer"
    - **Output:** 
        - `JourneyStepName`: (remains undefined)

2. **No `JourneyAction`:**
    - **Input:**
        - `JourneyStep`: "1"
        - `JourneyAction`: ""
    - **Output:**
        - `JourneyStepName`: "Step 1"

3. **Already Defined `JourneyStepName`:**
    - **Input:**
        - `JourneyStepName`: "Initial Step"
        - `JourneyStep`: "3"
    - **Output:**
        - `JourneyStepName`: (remains "Initial Step")

## 4. Known Limitations & Gotchas

- **Undefined JourneySteps:** If `JourneyStep` is not defined, the extension will not construct a value for `JourneyStepName`, potentially leading to ambiguous tracking data.
- **Extension Conflicts:** This extension may conflict with others that manipulate `JourneyStepName` or similar properties, leading to unexpected data overwrites.
- **Object Mutability:** Users must ensure the input objects (`eventPayload`) are not mutated elsewhere to prevent unexpected behaviour.

## 5. Recommendations for Refactoring

- **Code Style:** Consider improving readability via consistent variable naming, clearer structure, and indentation.
- **Modularization:** While the extension is small, if it scales, consider breaking down logic into well-defined functions to improve maintainability.
- **Documentation:** Provide inline comments describing the purpose of each condition, making it easier for other developers to follow the logic.

*Note: The code is required to be compatible with ES5 standards; hence the use of modern syntax and methods should be avoided.*

## 6. Maintenance & Further Notes

- **Ongoing Maintenance:** Assign a specific owner for regular checks on the extensionâ€™s effectiveness and updates to tracking requirements.
- **Testing Guidelines:** Regularly run test scenarios, especially after any changes to associated events or user journeys to ensure expected outcomes.
- **Version Control:** Keep a changelog for modifications made to the extension, providing context for future reviews and troubleshooting.

--- 

This documentation aims to provide developers and stakeholders with a comprehensive understanding of the extension's functionality, usage, limitations, and maintenance.